* Minimal Crypto Exchange

** How to start the whole thing  

*** Preconditions

 * Docker
 * [[https://electrum.org/#download][Electrum Wallet]]
    
*** Step 1: Start Docker
   
Under MacOS once Docker has started you will see the lettering ~Docker Desktop is running~.

[[file:docs/img/2021-09-16_01.png]]

*** Step 2: Start the container

Run ~docker-compose up -d~ in the same directory as the ~docker-compose.yml~ file.

*** Step 3: Verify that you can reach the explorer of the BTC testnet

When you enter ~http://localhost:3002~ in your browser, you should see something like this:

[[file:docs/img/2021-09-16_02.png]]

This is the frontend of the [[https://bitcoinexplorer.org][BTC Explorer]] application.

*** Step 4: Verify that you can reach the frontend of the ETH testnet (Blockscout)

When you enter ~http://localhost:4000~ in your browser, you should see something like this:

[[file:docs/img/2021-09-27_01.png]]

This is the frontend of the [[https://github.com/blockscout/blockscout][Blockscout]] application.

** Miscellaneous

*** How to check the balance

**** Step 1: Open the shell of BTC testnet
     
[[file:docs/img/2021-09-18_01.png]]

**** Step 2: Run the CLI command

In the shell window that appears thereafter, enter ~bitcoin-cli getbalance~.

[[file:docs/img/2021-09-18_02.png]]

*** How to generate a new Bitcoin address

**** Preconditions    

 * BTC testnet shell is open (see step 1 of the section *How to check balance* on how to do this).

**** Process

Run ~bitcoin-cli getnewaddress~ in the BTC testnet shell.

The output will be something like ~2N5Yngd2nDX4pur3Wec9WeL4xmSvBCyMsqi~.

*** How to generate test Bitcoins

**** Preconditions    

 * BTC testnet shell is open (see step 1 of the section *How to check balance* on how to do this).

**** Process

***** Step 1: Check balance

See section *How to check the balance* above. Note the amount.
      
***** Step 2: Generate test Bitcoins
     
~bitcoin-cli generatetoaddress 200 <address>~

where ~<address>~ is the address you generated with ~bitcoin-cli getnewaddress~.

***** Step 3: Check the balance again

This time it should be larger than at step 1.

*** How to send test Bitcoins to an Electrum wallet

**** Preconditions

 * Steps in section *How to start the whole thing* executed.
 * Electrum Wallet application installed

**** Step 1: Start the Electrum wallet in ~regtest~ mode

On MacOS you can do it using ~open /Applications/Electrum.app --args --regtest~.     

**** Step 2: Set up a wallet in Electrum (if not done already)

Follow the wizard after the startup.

**** Step 3: Determine the address of the Electrum wallet

Go to the ~Receive~ tab.

[[file:docs/img/2021-09-18_03.png]]

Click on the ~New address~ button.

[[file:docs/img/2021-09-18_04.png]]

The red rectangle in the screenshot above shows the address of the Electrum wallet.

**** Step 4: Open the BTC testnet shell

See *Step 1: Open the shell of BTC testnet* in section *How to check the balance* above.

**** Step 5: Send test BTC to the Electrum wallet

Run ~bitcoin-cli sendtoaddress <Address> 1~ in the BTC testnet shell where ~<Address>~ is the address from step 3.

[[file:docs/img/2021-09-18_05.png]]

Thereafter the sent amount should appear in the Electrum wallet.

[[file:docs/img/2021-09-18_06.png]]

